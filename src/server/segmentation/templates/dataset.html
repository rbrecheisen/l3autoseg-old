{% extends "base.html" %}
{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-10">
            <div class="card" style="margin-top: 10px;">
                <div class="card-header">Dataset <b>{{ dataset.name }}</b></div>
                <div class="card-body">
                    {% if images %}
                    <b>Images</b>
                    To start segmentation of the above images, click the "Segment" button. Segmentation
                    of the images will take about {{ time_req }}. You can click the "Refresh page"
                    link below to refresh the page and view status updates for each image. To view the
                    segmentation results (after they have finished) click the "View results" link.<br>
                    <br>
                    <a href="/segmentation/datasets/{{ dataset.id }}?action=segment">
                        <button class="btn btn-primary">Segment</button>
                    </a>
                    <br>
                    To redo the segmentation (and overwrite previous results), click the "Clear results" button.
                    <br>
                    <a href="/segmentation/datasets/{{ dataset.id }}?action=clear">
                        <button class="btn btn-primary">Clear results</button>
                    </a>
                    <br>
                    <p style="margin-top: 10px"><a href="/segmentation/datasets/{{ dataset.id }}">Refresh page</a></p>
                    <p style="margin-top: 10px"><a href="/segmentation/datasets/">Back</a></p>
                    <br>
                    <ul class="list-group">
                        {% for img in images %}
                            {% if img.job_status == "finished" %}
                                <li class="list-group-item">
                                    {{ img.file_obj.name }} [ {{ img.job_status }}]
                                    <a href="/segmentation/files/{{ img.png_file_name }}">PNG</a>
                                    <a href="/segmentation/files/{{ img.pred_file_name }}">NPY</a>
                                </li>
                            {% else %}
                                {% if img.job_status %}
                                    <li class="list-group-item">{{ img.file_obj.name }} [ {{ img.job_status }}]</li>
                                {% else %}
                                    <li class="list-group-item">{{ img.file_obj.name }}</li>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    </ul>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
